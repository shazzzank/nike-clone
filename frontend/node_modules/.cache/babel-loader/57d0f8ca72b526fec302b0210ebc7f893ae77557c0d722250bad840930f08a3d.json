{"ast":null,"code":"import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import Layout from\"../layout\";import Filter from\"../components/filter\";import Arrow from\"../icons/arrow\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Collection(props){const[products,setProducts]=useState([]);const[filters,setFilters]=useState({category:props.category});const[boolean,setBoolean]=useState(false);const navigate=useNavigate();useEffect(()=>{setFilters({category:props.category});},[props.category]);useEffect(()=>{axios.post(\"https://nike-clone-gamma-snowy.vercel.app/products\",filters).then(res=>setProducts(res.data)).catch(err=>console.log(err));},[filters]);function sort(by){switch(by){case\"Newest\":setProducts([...products].sort((a,b)=>new Date(b.created)-new Date(a.created)));break;case\"Price: Low-High\":setProducts([...products].sort((a,b)=>a.price-b.price));break;case\"Price: High-Low\":setProducts([...products].sort((a,b)=>b.price-a.price));break;default:break;}setBoolean(!boolean);}return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-11/12 pt-20 m-auto pb-40\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"font-medium text-2xl\",children:[props.category,\" Shoes (\",products.length>0?products.length:\"0\",\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"flex gap-1\",onClick:_=>setBoolean(!boolean),children:[\"Sort By\",/*#__PURE__*/_jsx(Arrow,{boolean:boolean})]}),/*#__PURE__*/_jsx(\"div\",{className:\"relative\",children:/*#__PURE__*/_jsx(\"div\",{className:\"absolute right-0 w-36 bg-white border border-white rounded-2xl p-3 *:pt-1 \".concat(boolean?\"visible\":\"invisible\"),children:[\"Newest\",\"Price: High-Low\",\"Price: Low-High\"].map((option,index)=>/*#__PURE__*/_jsx(\"p\",{className:\"hover:cursor-pointer hover:text-gray-400\",onClick:()=>sort(option),children:option},index))})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between pt-4 m-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-1/4 md:w-1/5 lg:w-2/12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"sticky top-0\",children:/*#__PURE__*/_jsx(Filter,{category:props.category,setFilters:setFilters})})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-8/12 md:w-9/12 lg:w-4/5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-6\",children:products.length>0?products.map(product=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>navigate(\"/product/\".concat(product.slug)),className:\"flex flex-col text-sm sm:text-base mt-5\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.name,className:\"w-full px-5 h-64 object-contain mb-2 bg-gray-100 border border-transparent rounded-lg\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:product.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500\",children:[product.category,\" Shoes\"]}),product.colors.length&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\".concat(product.colors.length,\" \").concat(product.colors.length>1?\"Colors\":\"Color\")}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900 mt-1\",children:product.discount&&product.discount>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"$\"+(product.price-product.price*product.discount/100).toFixed(2)}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-300 px-2 line-through\",children:[\"$\",product.price.toFixed(2)]})]}):/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",product.price.toFixed(2)]})})]},product._id)):/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500\",children:\"No products found\"})})})]})]})});}export default Collection;","map":{"version":3,"names":["useState","useEffect","useNavigate","axios","Layout","Filter","Arrow","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Collection","props","products","setProducts","filters","setFilters","category","boolean","setBoolean","navigate","post","then","res","data","catch","err","console","log","sort","by","a","b","Date","created","price","children","className","length","onClick","_","concat","map","option","index","product","slug","src","image","alt","name","colors","discount","toFixed","_id"],"sources":["/Users/shashanktayal/Documents/GitHub/nike-clone/frontend/src/pages/collection.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Layout from \"../layout\";\nimport Filter from \"../components/filter\";\nimport Arrow from \"../icons/arrow\";\n\nfunction Collection(props) {\n  const [products, setProducts] = useState([]);\n  const [filters, setFilters] = useState({ category: props.category });\n  const [boolean, setBoolean] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    setFilters({ category: props.category }); \n  }, [props.category]);\n\n  useEffect(\n    () => {\n      axios\n        .post(\"https://nike-clone-gamma-snowy.vercel.app/products\", filters)\n        .then((res) => setProducts(res.data))\n        .catch((err) => console.log(err));\n    },\n    [filters],\n  );\n\n  function sort(by) {\n    switch (by) {\n      case \"Newest\":\n        setProducts(\n          [...products].sort(\n            (a, b) => new Date(b.created) - new Date(a.created),\n          ),\n        );\n        break;\n      case \"Price: Low-High\":\n        setProducts([...products].sort((a, b) => a.price - b.price));\n        break;\n      case \"Price: High-Low\":\n        setProducts([...products].sort((a, b) => b.price - a.price));\n        break;\n      default:\n        break;\n    }\n    setBoolean(!boolean);\n  }\n\n  return (\n    <Layout>\n      <div className=\"w-11/12 pt-20 m-auto pb-40\">\n        <div className=\"flex justify-between\">\n          <h2 className=\"font-medium text-2xl\">\n            {props.category} Shoes (\n            {products.length > 0 ? products.length : \"0\"})\n          </h2>\n          <div className=\"text-right\">\n            <h3 className=\"flex gap-1\" onClick={(_) => setBoolean(!boolean)}>\n              Sort By\n              <Arrow boolean={boolean} />\n            </h3>\n            <div className=\"relative\">\n              <div\n                className={`absolute right-0 w-36 bg-white border border-white rounded-2xl p-3 *:pt-1 ${\n                  boolean ? \"visible\" : \"invisible\"\n                }`}\n              >\n                {[\"Newest\", \"Price: High-Low\", \"Price: Low-High\"].map(\n                  (option, index) => (\n                    <p\n                      key={index}\n                      className=\"hover:cursor-pointer hover:text-gray-400\"\n                      onClick={() => sort(option)}\n                    >\n                      {option}\n                    </p>\n                  ),\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"flex justify-between pt-4 m-auto\">\n          <div className=\"w-1/4 md:w-1/5 lg:w-2/12\">\n            <div className=\"sticky top-0\">\n              <Filter category={props.category} setFilters={setFilters} />\n            </div>\n          </div>\n          <div className=\"w-8/12 md:w-9/12 lg:w-4/5\">\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-6\">\n              {products.length > 0 ? (\n                products.map((product) => (\n                  <div\n                    key={product._id}\n                    onClick={() => navigate(`/product/${product.slug}`)}\n                    className=\"flex flex-col text-sm sm:text-base mt-5\"\n                  >\n                    <img\n                      src={product.image}\n                      alt={product.name}\n                      className=\"w-full px-5 h-64 object-contain mb-2 bg-gray-100 border border-transparent rounded-lg\"\n                    />\n                    <p className=\"font-medium text-gray-900\">{product.name}</p>\n                    <p className=\"text-gray-500\">{product.category} Shoes</p>\n                    {product.colors.length && (\n                      <p className=\"text-gray-500\">\n                        {`${product.colors.length} ${\n                          product.colors.length > 1 ? \"Colors\" : \"Color\"\n                        }`}\n                      </p>\n                    )}\n                    <p className=\"font-medium text-gray-900 mt-1\">\n                      {product.discount && product.discount > 0 ? (\n                        <>\n                          <span>\n                            {\"$\" +\n                              (\n                                product.price -\n                                (product.price * product.discount) / 100\n                              ).toFixed(2)}\n                          </span>\n                          <span className=\"text-gray-300 px-2 line-through\">\n                            ${product.price.toFixed(2)}\n                          </span>\n                        </>\n                      ) : (\n                        <span>${product.price.toFixed(2)}</span>\n                      )}\n                    </p>\n                  </div>\n                ))\n              ) : (\n                <p className=\"text-center text-gray-500\">No products found</p>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n\nexport default Collection;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}